<%= render partial: "decidim/elections/admin/elections/tabs_menu" %>

<% add_decidim_page_title(t(".title")) %>

<div class="item_show__header">
  <h1 class="item_show__header-title"><%= t(".title") %></h1>
</div>

<div class="item__edit-form">
  <%= decidim_form_for(@form, url: election_census_updates_path(election), method: :post, html: { class: "form-defaults form new_census_entry", id: "new_census_entry_form" }) do |f| %>
    <div class="form__wrapper">
      <div class="card pt-4">
        <div class="card-section">
          <% @form.column_definitions.each_with_index do |column, index| %>
            <div class="row column">
              <%= label_tag "data_#{column["name"]}", column["name"] %>
              <% if column["column_type"] == "date" %>
                <%= date_field_tag "data[#{column["name"]}]",
                                   nil,
                                   id: "data_#{column["name"]}",
                                   required: true,
                                   autofocus: index.zero?,
                                   autocomplete: "off",
                                   data: { controller: "date-picker" } %>
              <% else %>
                <%= text_field_tag "data[#{column["name"]}]",
                                   nil,
                                   id: "data_#{column["name"]}",
                                   required: true,
                                   autofocus: index.zero?,
                                   autocomplete: "off" %>
              <% end %>
            </div>
          <% end %>
        </div>
      </div>
    </div>

    <div class="item__edit-sticky">
      <div class="item__edit-sticky-container">
        <%= f.submit t(".create"), class: "button button__sm button__secondary" %>
      </div>
    </div>
  <% end %>
</div>
